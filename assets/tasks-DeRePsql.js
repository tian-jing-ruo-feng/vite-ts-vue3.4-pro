import{cx as k,r as g,g as A,b as B,j as u,k as S}from"./index-BhiF1SC6.js";const h="tasks",Y="todo",K="done",N="archive",I="taskGroups",U="YYYY-MM-DD HH:mm:ss",b="all",O=()=>({getItem:()=>{const c=JSON.parse(localStorage.getItem(I));return(c==null?void 0:c.length)?c:[]},setItem:c=>localStorage.setItem(I,JSON.stringify(c))}),{getItem:x,setItem:p}=O(),D={id:"all",name:"全部",checked:!0,edited:!1,color:"",isDeleted:!1},E=x();E.length||p([D]);const C=k("taskGroup",()=>{const e=g(x());return{tags:e,add:s=>(e.value.push(s),p(e.value),e),update:s=>(e.value=e.value.map(r=>r.id===s.id?{...r,...s}:r),p(e.value),e),remove:s=>(e.value=e.value.map(r=>r.id===s.id?{...r,isDeleted:!0}:r),p(e.value),s),checkTag:s=>{e.value=e.value.map(r=>(r.id===s.id?r.checked=!0:r.checked=!1,r))}}});var y={exports:{}};(function(e,m){(function(c,a){e.exports=a()})(B,function(){return function(c,a,l){a.prototype.isBetween=function(s,r,t,o){var n=l(s),i=l(r),f=(o=o||"()")[0]==="(",d=o[1]===")";return(f?this.isAfter(n,t):!this.isBefore(n,t))&&(d?this.isBefore(i,t):!this.isAfter(i,t))||(f?this.isBefore(n,t):!this.isAfter(n,t))&&(d?this.isAfter(i,t):!this.isBefore(i,t))}}})})(y);var w=y.exports;const R=A(w),j=()=>({getItem:()=>{const a=JSON.parse(localStorage.getItem(h));return(a==null?void 0:a.length)?a:[]},setItem:a=>{localStorage.setItem(h,JSON.stringify(a))},save2Local:a=>{const l="tasks.json",s=document.createElement("a"),r=new Blob([a],{type:"application/json"});s.style.display="none",s.download=l,s.href=URL.createObjectURL(r),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}});u.extend(R);const{setItem:T,getItem:G}=j(),M=k(h,()=>{const e=g(G()),m=S(()=>t=>{var o;return t.id===b?e.value:(o=e.value)==null?void 0:o.filter(n=>n.groupTag===t.id)}),c=S(()=>t=>{var o;return(o=e.value)==null?void 0:o.filter(n=>n.id===t)[0]});return{tasks:e,tasksByGroupTag:m,tasksById:c,addTask:t=>{var o;return(o=e.value)==null||o.push(t),T(e.value),e},updateTask:t=>{var o;return e.value=(o=e.value)==null?void 0:o.map(n=>n.id===t.id?{...n,...t}:n),T(e.value),e},toTop:t=>{var o;if((o=e.value)!=null&&o.length){const n=e.value.findIndex(i=>i.id===t.id);t.isTop?(e.value=e.value.map(i=>(delete i.isTop,i)),e.value.splice(n,1),e.value.unshift(t)):(delete t.isTop,e.value[n]=t)}return T(e.value),e},searchTasks:(t,o)=>{const n="YYYY-MM-DD",{createTime:i="day"}=t,f=d=>{const v=u(d.createTime).format(n);if(i==="day")return u().isSame(v,"day");if(i==="weak")return u(v).isBetween(u(),u().subtract(7,"day"));if(i==="month")return u(v).isBetween(u(),u().subtract(30,"day"))};return o.filter(d=>f(d))}}});export{U as D,Y as T,K as a,N as b,M as c,b as d,j as e,R as i,C as u};
