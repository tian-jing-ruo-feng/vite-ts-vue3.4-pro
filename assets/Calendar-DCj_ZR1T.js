import{e as nt,af as z,r as st,U as it,c as dt,o as lt,j as L,_ as ht}from"./index-lz69W7M0.js";import{c as _t,u as ut}from"./tasks-DhQEJ3-W.js";var yt=Object.defineProperty,wt=(r,t,e)=>t in r?yt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,b=(r,t,e)=>(wt(r,typeof t!="symbol"?t+"":t,e),e);const G=class h{constructor(t){b(this,"_date"),t instanceof h?this._date=new Date(t.toDate()):t instanceof Date?this._date=new Date(t):typeof t=="string"||typeof t=="number"?(this._date=new Date(t),typeof t=="string"&&isNaN(this._date.getTime())&&(this._date=new Date(t.replace(/-/g,"/")))):this._date=new Date}toDate(){return this._date}isValid(){return!isNaN(this._date.getTime())}diff(t,e="day"){const a=new h(t).toDate(),o=this._date.getTime()-a.getTime();switch(e){case"year":return this._date.getFullYear()-a.getFullYear();case"month":return(this._date.getFullYear()-a.getFullYear())*12+(this._date.getMonth()-a.getMonth());case"day":default:return Math.floor(o/(1e3*60*60*24))}}startOf(t){const e=new Date(this._date);switch(t){case"year":e.setMonth(0),e.setDate(1),e.setHours(0,0,0,0);break;case"month":e.setDate(1),e.setHours(0,0,0,0);break;case"day":e.setHours(0,0,0,0);break}return new h(e)}endOf(t){const e=new Date(this._date);switch(t){case"year":e.setMonth(11),e.setDate(31),e.setHours(23,59,59,999);break;case"month":e.setDate(new Date(e.getFullYear(),e.getMonth()+1,0).getDate()),e.setHours(23,59,59,999);break;case"day":e.setHours(23,59,59,999);break}return new h(e)}add(t,e){const a=new Date(this._date);switch(e){case"year":a.setFullYear(a.getFullYear()+t);break;case"month":a.setMonth(a.getMonth()+t);break;case"day":a.setDate(a.getDate()+t);break}return new h(a)}subtract(t,e){return this.add(-t,e)}format(t){const e={YYYY:this._date.getFullYear(),MM:(this._date.getMonth()+1).toString().padStart(2,"0"),DD:this._date.getDate().toString().padStart(2,"0"),HH:this._date.getHours().toString().padStart(2,"0"),mm:this._date.getMinutes().toString().padStart(2,"0"),ss:this._date.getSeconds().toString().padStart(2,"0"),dddd:h.daysOfWeek[this._date.getDay()]};return t.replace(/YYYY|MM|DD|HH|mm|ss|dddd/g,a=>e[a].toString())}year(t){if(t===void 0)return this._date.getFullYear();const e=new Date(this._date);return e.setFullYear(t),new h(e)}month(t){if(t===void 0)return this._date.getMonth();const e=new Date(this._date);return e.setMonth(t),new h(e)}date(t){if(t===void 0)return this._date.getDate();const e=new Date(this._date);return e.setDate(t),new h(e)}day(t){if(t===void 0)return this._date.getDay();{const e=this._date.getDay(),a=t-e,o=new Date(this._date);return o.setDate(this._date.getDate()+a),new h(o)}}isBefore(t){const e=new h(t).toDate();return this._date.getTime()<e.getTime()}isAfter(t){const e=new h(t).toDate();return this._date.getTime()>e.getTime()}isSame(t,e="day"){const a=new h(t).toDate();switch(e){case"year":return this._date.getFullYear()===a.getFullYear();case"month":return this._date.getFullYear()===a.getFullYear()&&this._date.getMonth()===a.getMonth();case"day":default:return this._date.getFullYear()===a.getFullYear()&&this._date.getMonth()===a.getMonth()&&this._date.getDate()===a.getDate()}}isBetween(t,e,a){const o=new h(t).startOf(a).toDate(),d=new h(e).endOf(a).toDate(),n=this.toDate();return n>=o&&n<=d}};b(G,"daysOfWeek",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);let mt=G;const _=r=>new mt(r),f=r=>_(r).startOf("day"),x=(r,t)=>{r=f(r),t=f(t);const e=t.diff(r,"day");return Array.from({length:e+1},(a,o)=>r.add(o,"day"))};class ct{constructor(){b(this,"dayDetails",{}),b(this,"holidays",{}),b(this,"workdays",{}),b(this,"inLieuDays",{})}y(t){return this.dayDetails.year=t,this}mark(t){return this.dayDetails.holiday=t,this}save(t,e,a){if(!this.dayDetails.year)throw new Error("should set year before saving holiday");if(!this.dayDetails.holiday)throw new Error("should set holiday before saving holiday");this.dayDetails.dayType=a;const o=_(`${this.dayDetails.year}-${t}-${e}`);return a===2?this.holidays[o.format("YYYY-MM-DD")]=this.dayDetails.holiday:a===1?this.workdays[o.format("YYYY-MM-DD")]=this.dayDetails.holiday:a===3&&(this.inLieuDays[o.format("YYYY-MM-DD")]=this.dayDetails.holiday),this.dayDetails.month=t,this.dayDetails.day=e,this}to(t,e){if(!this.dayDetails.year||!this.dayDetails.month||!this.dayDetails.day)throw new Error("should set year/month/day before saving holiday range");const a=_(`${this.dayDetails.year}-${this.dayDetails.month}-${this.dayDetails.day}`),o=_(`${this.dayDetails.year}-${t}-${e}`);if(o.isBefore(a)||o.isSame(a))throw new Error("end date should be after start date");const d=o.diff(a,"day");for(let n=1;n<=d;n++){const i=a.add(n,"day");this.dayDetails.dayType===2?this.holidays[i.format("YYYY-MM-DD")]=this.dayDetails.holiday:this.dayDetails.dayType===1?this.workdays[i.format("YYYY-MM-DD")]=this.dayDetails.holiday:this.dayDetails.dayType===3&&(this.inLieuDays[i.format("YYYY-MM-DD")]=this.dayDetails.holiday)}return this}w(t,e){return this.save(t,e,1)}r(t,e){return this.save(t,e,2)}i(t,e){return this.save(t,e,3)}ny(){return this.mark("New Year's Day,元旦,1")}s(){return this.mark("Spring Festival,春节,3")}t(){return this.mark("Tomb-sweeping Day,清明,1")}l(){return this.mark("Labour Day,劳动节,1")}d(){return this.mark("Dragon Boat Festival,端午,1")}n(){return this.mark("National Day,国庆节,3")}m(){return this.mark("Mid-autumn Festival,中秋,1")}a(){return this.mark("Anti-Fascist 70th Day,中国人民抗日战争暨世界反法西斯战争胜利70周年纪念日,1")}}const ft=()=>{const r=new ct;return r.y(2024).ny().r(1,1).s().r(2,10).to(2,17).w(2,4).w(2,18).i(2,15).to(2,16).t().r(4,4).to(4,6).w(4,7).i(4,5).l().r(5,1).to(5,5).w(4,28).w(5,11).i(5,2).to(5,3).d().r(6,10).m().r(9,15).to(9,17).w(9,14).i(9,16).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),r.y(2023).ny().r(1,1).to(1,2).s().r(1,21).to(1,27).w(1,28).to(1,29).i(1,26).to(1,27).t().r(4,5).l().r(4,29).to(5,3).w(4,23).w(5,6).i(5,2).to(5,3).d().r(6,22).to(6,24).w(6,25).i(6,23).m().r(9,29).n().r(9,30).to(10,6).w(10,7).to(10,8).i(10,5).to(10,6),r.y(2022).ny().r(1,1).to(1,3).s().r(1,31).to(2,6).w(1,29).w(1,30).i(2,3).to(2,4).t().r(4,3).to(4,5).w(4,2).i(4,4).l().r(4,30).to(5,4).w(4,24).w(5,7).i(5,3).to(5,4).d().r(6,3).to(6,5).m().r(9,10).to(9,12).n().r(10,1).to(10,7).w(10,8).w(10,9).i(10,6).to(10,7).ny().r(12,31),r.y(2021).ny().r(1,1).to(1,3).s().r(2,11).to(2,17).w(2,7).w(2,20).i(2,16).to(2,17).t().r(4,3).to(4,5).l().r(5,1).to(5,5).w(4,25).w(5,8).i(5,4).to(5,5).d().r(6,12).to(6,14).m().r(9,19).to(9,21).w(9,18).i(9,20).n().r(10,1).to(10,7).w(9,26).w(10,9).i(10,6).to(10,7),r.y(2020).ny().r(1,1).s().r(1,24).to(2,2).w(1,19).i(1,29).t().r(4,4).to(4,6).l().r(5,1).to(5,5).w(4,26).w(5,9).i(5,4).to(5,5).d().r(6,25).to(6,27).w(6,28).i(6,26).n().r(10,1).to(10,8).w(9,27).w(10,10).i(10,7).to(10,8),r.y(2019).ny().r(1,1).s().r(2,4).to(2,10).w(2,2).to(2,3).i(2,4).i(2,8).t().r(4,5).to(4,7).l().r(5,1).to(5,4).w(4,28).w(5,5).i(5,2).i(5,3).d().r(6,7).to(6,9).m().r(9,13).to(9,15).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),r.y(2018).ny().r(1,1).s().r(2,15).to(2,21).w(2,11).w(2,24).i(2,19).to(2,21).t().r(4,5).to(4,7).w(4,8).i(4,6).l().r(4,29).to(5,1).w(4,28).i(4,30).d().r(6,18).n().r(10,1).to(10,7).w(9,29).to(9,30).i(10,4).to(10,5).m().r(9,24).ny().r(12,30).to(12,31).w(12,29).i(12,31),r.y(2017).ny().r(1,1).to(1,2).s().r(1,27).to(2,2).w(1,22).w(2,4).i(2,1).to(2,2).t().r(4,2).to(4,4).w(4,1).i(4,3).l().r(5,1).d().r(5,28).to(5,30).w(5,27).i(5,29).n().r(10,1).to(10,8).w(9,30).i(10,6).m().r(10,4),r.y(2016).ny().r(1,1).s().r(2,7).to(2,13).w(2,6).w(2,14).i(2,11).to(2,12).t().r(4,4).l().r(5,1).to(5,2).d().r(6,9).to(6,11).w(6,12).i(6,10).m().r(9,15).to(9,17).w(9,18).i(9,16).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7),r.y(2015).ny().r(1,1).to(1,3).w(1,4).i(1,2).s().r(2,18).to(2,24).w(2,15).w(2,28).i(2,23).to(2,24).t().r(4,5).to(4,6).l().r(5,1).d().r(6,20).r(6,22).m().r(9,27).n().r(10,1).to(10,7).w(10,10).i(10,7).a().r(9,3).to(9,4).w(9,6).i(9,4),r.y(2014).ny().r(1,1).s().r(1,31).to(2,6).w(1,26).w(2,8).i(2,5).to(2,6).t().r(4,5).to(4,7).l().r(5,1).to(5,3).w(5,4).i(5,2).d().r(6,2).m().r(9,8).n().r(10,1).to(10,7).w(9,28).w(10,11).i(10,6).to(10,7),r.y(2013).ny().r(1,1).to(1,3).w(1,5).to(1,6).i(1,2).to(1,3).s().r(2,9).to(2,15).w(2,16).to(2,17).i(2,14).to(2,15).t().r(4,4).to(4,6).w(4,7).i(4,5).l().r(4,29).to(5,1).w(4,27).to(4,28).i(4,29).to(4,30).d().r(6,10).to(6,12).w(6,8).to(6,9).i(6,10).to(6,11).m().r(9,19).to(9,21).w(9,22).i(9,20).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),r.y(2012).ny().r(1,1).to(1,3).i(1,3).s().r(1,22).to(1,28).w(1,21).w(1,29).i(1,26).to(1,27).t().r(4,2).to(4,4).w(3,31).w(4,1).i(4,2).to(4,3).l().r(4,29).to(5,1).w(4,28).i(4,30).d().r(6,22).r(6,24).m().r(9,30).n().r(10,1).to(10,7).w(9,29).i(10,5),r.y(2011).ny().r(1,1).to(1,3).s().r(2,2).to(2,8).w(1,30).w(2,12).i(2,7).to(2,8).t().r(4,3).to(4,5).w(4,2).i(4,4).l().r(4,30).to(5,2).d().r(6,4).r(6,6).m().r(9,10).to(9,12).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7).ny().w(12,31),r.y(2010).ny().r(1,1).to(1,3).s().r(2,13).to(2,19).w(2,20).to(2,21).i(2,18).to(2,19).t().r(4,3).to(4,5).l().r(5,1).to(5,3).d().r(6,14).to(6,16).w(6,12).to(6,13).i(6,14).to(6,15).m().r(9,22).to(9,24).w(9,19).w(9,25).i(9,23).to(9,24).n().r(10,1).to(10,7).w(9,26).w(10,9).i(10,6).to(10,7),r.y(2009).ny().r(1,1).to(1,3).w(1,4).i(1,2).s().r(1,25).to(1,31).w(1,24).w(2,1).i(1,29).to(1,30).t().r(4,4).to(4,6).l().r(5,1).to(5,3).d().r(5,28).to(5,30).w(5,31).i(5,29).n().r(10,1).to(10,8).w(9,27).w(10,10).i(10,7).to(10,8).m().r(10,3),r.y(2008).ny().r(1,1).s().r(2,6).to(2,12).w(2,2).to(2,3).i(2,11).to(2,12).t().r(4,4).to(4,6).l().r(5,1).to(5,3).w(5,4).i(5,2).d().r(6,7).to(6,9).m().r(9,13).to(9,15).n().r(9,29).to(10,5).w(9,27).to(9,28).i(9,29).to(9,30),r.y(2007).ny().r(1,1).to(1,3).i(1,2).to(1,3).s().r(2,18).to(2,24).w(2,17).w(2,25).i(2,22).to(2,23).l().r(5,1).to(5,7).w(4,28).to(4,29).i(5,4).i(5,7).n().r(10,1).to(10,7).w(9,29).to(9,30).i(10,4).to(10,5).ny().r(12,30).to(12,31).w(12,29).i(12,31),r.y(2006).ny().r(1,1).to(1,3).s().r(1,29).to(2,4).w(1,28).w(2,5).i(2,2).to(2,3).l().r(5,1).to(5,7).w(4,29).to(4,30).i(5,4).to(5,5).n().r(10,1).to(10,7).w(9,30).w(10,8).i(10,5).to(10,6).ny().w(12,30).to(12,31),r.y(2005).ny().r(1,1).to(1,3).s().r(2,9).to(2,15).w(2,5).to(2,6).i(2,14).to(2,15).l().r(5,1).to(5,7).w(4,30).w(5,8).i(5,5).to(5,6).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7),r.y(2004).ny().r(1,1).s().r(1,22).to(1,28).w(1,17).to(1,18).i(1,27).to(1,28).l().r(5,1).to(5,7).w(5,8).to(5,9).i(5,6).to(5,7).n().r(10,1).to(10,7).w(10,9).to(10,10).i(10,6).to(10,7),{holidays:r.holidays,workdays:r.workdays,inLieuDays:r.inLieuDays}},{holidays:F,workdays:B,inLieuDays:gt}=ft(),g=(...r)=>{if(r.length!==1)return r.map(e=>g(e));const t=f(r[0]);if(!t.isValid())throw new Error(`unsupported type ${typeof t}, expected type is Date or Dayjs`);return t},U=r=>!v(r),v=r=>{const t=g(r),e=t.day(),a=t.format("YYYY-MM-DD");return!!(B[a]||e>=1&&e<=5&&!F[a])},Dt=r=>(r=g(r),!!gt[r.format("YYYY-MM-DD")]),V=r=>{r=g(r);const t=r.format("YYYY-MM-DD");if(B[t])return{date:t,work:!0,name:B[t]};if(F[t])return{date:t,work:!1,name:F[t]};{const e=r.day();return{date:t,work:e!==0&&e!==6,name:r.format("dddd")}}},J=(r,t,e=!0)=>(r=g(r),t=g(t),e?x(r,t).filter(U).map(a=>a.format("YYYY-MM-DD")):x(r,t).filter(a=>F[a.format("YYYY-MM-DD")]).map(a=>a.format("YYYY-MM-DD"))),Yt=(r,t,e=!0)=>(r=g(r),t=g(t),e?x(r,t).filter(v).map(a=>a.format("YYYY-MM-DD")):x(r,t).filter(a=>v(a)&&a.day()>=1&&a.day()<=5).map(a=>a.format("YYYY-MM-DD"))),pt=(r=0,t=_())=>{if(t=f(t),r===0){if(v(t))return t.format("YYYY-MM-DD");r=1}const e=r>0?1:-1;let a=Math.abs(r);for(;a>0;)t=t.add(e,"day"),v(t)&&a--;return t.format("YYYY-MM-DD")},Mt=Object.freeze(Object.defineProperty({__proto__:null,findWorkday:pt,getDayDetail:V,getHolidaysInRange:J,getWorkdaysInRange:Yt,isHoliday:U,isInLieu:Dt,isWorkday:v},Symbol.toStringTag,{value:"Module"})),bt={the_beginning_of_spring:[4.6295,3.87],rain_water:[19.4599,18.73],the_waking_of_insects:[6.3926,5.63],the_spring_equinox:[21.4155,20.646],pure_brightness:[5.59,4.81],grain_rain:[20.888,20.1],the_beginning_of_summer:[6.318,5.52],lesser_fullness_of_grain:[21.86,21.04],grain_in_beard:[6.5,5.678],the_summer_solstice:[22.2,21.37],lesser_heat:[7.928,7.108],greater_heat:[23.65,22.83],the_beginning_of_autumn:[28.35,7.5],the_end_of_heat:[23.95,23.13],white_dew:[8.44,7.646],the_autumn_equinox:[23.822,23.042],code_dew:[9.098,8.318],frost_descent:[24.218,23.438],the_beginning_of_winter:[8.218,7.438],lesser_snow:[23.08,22.36],greater_snow:[7.9,7.18],the_winter_solstice:[22.6,21.94],lesser_cold:[6.11,5.4055],greater_cold:[20.84,20.12]},K={1:["lesser_cold","greater_cold"],2:["the_beginning_of_spring","rain_water"],3:["the_waking_of_insects","the_spring_equinox"],4:["pure_brightness","grain_rain"],5:["the_beginning_of_summer","lesser_fullness_of_grain"],6:["grain_in_beard","the_summer_solstice"],7:["lesser_heat","greater_heat"],8:["the_beginning_of_autumn","the_end_of_heat"],9:["white_dew","the_autumn_equinox"],10:["code_dew","frost_descent"],11:["the_beginning_of_winter","lesser_snow"],12:["greater_snow","the_winter_solstice"]},vt={"2026_rain_water":-1,"2084_the_spring_equinox":1,"1911_the_beginning_of_summer":1,"2008_lesser_fullness_of_grain":1,"1902_grain_in_beard":1,"1928_the_summer_solstice":1,"1925_lesser_heat":1,"2016_lesser_heat":1,"1922_greater_heat":1,"2002_the_beginning_of_autumn":1,"1927_white_dew":1,"1942_the_autumn_equinox":1,"2089_frost_descent":1,"2089_the_beginning_of_winter":1,"1978_lesser_snow":1,"1954_greater_snow":1,"1918_the_winter_solstice":-1,"2021_the_winter_solstice":-1,"1982_lesser_cold":1,"2019_lesser_cold":-1,"2000_greater_cold":1,"2082_greater_cold":1},Q={lesser_cold:"小寒",greater_cold:"大寒",the_beginning_of_spring:"立春",rain_water:"雨水",the_waking_of_insects:"惊蛰",the_spring_equinox:"春分",pure_brightness:"清明",grain_rain:"谷雨",the_beginning_of_summer:"立夏",lesser_fullness_of_grain:"小满",grain_in_beard:"芒种",the_summer_solstice:"夏至",lesser_heat:"小暑",greater_heat:"大暑",the_beginning_of_autumn:"立秋",the_end_of_heat:"处暑",white_dew:"白露",the_autumn_equinox:"秋分",code_dew:"寒露",frost_descent:"霜降",the_beginning_of_winter:"立冬",lesser_snow:"小雪",greater_snow:"大雪",the_winter_solstice:"冬至"},I=(r,t,e)=>{const a=r>=2e3?21:20,o=r%100,d=.2422,n=bt[e][a===21?1:0];let i=Math.floor(o/4);["lesser_cold","greater_cold","the_beginning_of_spring","rain_water"].includes(e)&&(i=Math.floor((o-1)/4));let s=Math.floor(o*d+n)-i;const m=vt[`${r}_${e}`];return m&&(s+=m),_(`${r}-${t}-${s}`).format("YYYY-MM-DD")},X=(r,t)=>{const e=[];let a=f(r);const o=f(t||r);for(;a.isBefore(o)||a.isSame(o);){const d=a.year(),n=a.month()+1;K[n].forEach(i=>{const s=_(I(d,n,i));(s!=null&&s.isBefore(o)||s!=null&&s.isSame(o))&&(s!=null&&s.isAfter(a)||s!=null&&s.isSame(a))&&e.push({date:s.format("YYYY-MM-DD"),term:i,name:Q[i],index:1})}),n===12?a=a.add(1,"year").startOf("year"):a=a.add(1,"month").startOf("month")}return e},St=(r,t)=>{let e=f(r).subtract(1,"month");const a=f(t||r).add(1,"month"),o=[];for(;e.isBefore(a)||e.isSame(a);){const n=e.year(),i=e.month()+1;K[i].forEach(s=>{const m=_(I(n,i,s));o.push({term:s,date:m})}),e.month()===11?e=e.add(1,"year").startOf("year"):e=e.add(1,"month").startOf("month")}const d=[];return o.forEach((n,i)=>{for(let s=n.date;o[i+1]&&s.isBefore(o[i+1].date);s=s.add(1,"day"))d.push({day:s,term:n.term,name:Q[n.term],index:s.diff(n.date,"day")+1})}),t||(t=r),d.filter(n=>n.day.isBetween(r,t,"day")).map(n=>({date:n.day.format("YYYY-MM-DD"),term:n.term,name:n.name,index:n.index}))},Tt=Object.freeze(Object.defineProperty({__proto__:null,getSolarTermDate:I,getSolarTerms:X,getSolarTermsInRange:St},Symbol.toStringTag,{value:"Module"})),H=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],Z=["零","一","二","三","四","五","六","七","八","九"],kt=["正","二","三","四","五","六","七","八","九","十","冬","腊"],xt=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Ft=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Ht=["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],tt=r=>{let t=348;for(let e=32768;e>8;e>>=1)t+=H[r-1900]&e?1:0;return t+q(r)},j=r=>H[r-1900]&15,q=r=>j(r)?H[r-1900]&65536?30:29:0,C=r=>xt[r%10]+Ft[r%12],A=(r,t)=>H[r-1900]&65536>>t?30:29,$t=r=>Ht[(r-4)%12],Ot=r=>{const t=["初","十","廿","三十"];if(r===10)return"初十";if(r===20)return"二十";if(r===30)return"三十";const e=Math.floor(r/10),a=r%10;return t[e]+(a?Z[a]:"")},R=r=>{const t=new Array(7).fill(0);let e=0,a=0;const o=_(new Date(1900,0,31)),d=_(r);let n=d.diff(o,"day");t[5]=n+40,t[4]=14;let i=1900;for(;i<2100&&n>0;i++)e=tt(i),n-=e,t[4]+=12;n<0&&(n+=e,i--,t[4]-=12),t[0]=i,t[3]=i-1864,a=j(i),t[6]=0;for(let s=1;s<13&&n>0;s++)a>0&&s===a+1&&t[6]===0?(--s,t[6]=1,e=q(i)):e=A(i,s),t[6]===1&&s===a+1&&(t[6]=0),n-=e,t[6]===0&&t[4]++,t[1]=s;return n===0&&a>0&&t[6]===1?t[6]=0:n<0&&(n+=e,t[1]--,t[4]--),t[2]=n+1,{date:d.format("YYYY-MM-DD"),lunarYear:t[0],lunarMon:t[1]+1,lunarDay:t[2],isLeap:!!t[6],zodiac:$t(t[0]),yearCyl:C(t[3]),monCyl:C(t[4]),dayCyl:C(t[5]),lunarYearCN:`${t[0].toString().split("").map(s=>Z[Number(s)]).join("")}`,lunarMonCN:`${kt[t[1]]}月`,lunarDayCN:Ot(t[2])}},P=(r,t)=>{const e=_(r),a=_(t),o=[];for(let d=e;d.isBefore(a)||d.isSame(a,"day");d=d.add(1,"day"))o.push(R(d));return o},et=r=>{const t=_(r),e=t.year(),a=t.month()+1,o=t.date();let d=0;for(let l=1900;l<e;l++)d+=tt(l);let n=j(e);for(let l=1;l<a;l++)d+=A(e,l),l===n&&(d+=q(e));d+=o-1;const i=_(new Date(1900,0,31)),s=i.add(d,"day").format("YYYY-MM-DD");let m=d,S;return n===a&&(m+=A(e,a),S=i.add(m,"day").format("YYYY-MM-DD")),{date:s,leapMonthDate:S}},Et={getLunarDate:R,getLunarDatesInRange:P,getSolarDateFromLunar:et},Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Et,getLunarDate:R,getLunarDatesInRange:P,getSolarDateFromLunar:et},Symbol.toStringTag,{value:"Module"}));({...Mt,...Tt,...Nt});const Lt="#67c23a",Ct="#008000",Bt="#41b883",At={stateTodo:Lt,stateDone:Ct,stateArchive:Bt},It=nt({__name:"Calendar",setup(r){const{tasks:t}=z(_t()),{tags:e}=z(ut()),a=st();return it(()=>{var S;const o=new window.calendarJs(document.getElementById("calendar"),{manualEditingEnabled:!0,...window.__TRANSLATION_OPTIONS,dayHeaderNames:["周一","周二","周三","周四","周五","周六","周日"],sideMenuHeaderText:"日程",groupText:"分组：",groupsText:"分组",optionalText:"选项",showHolidays:!0,allowHtmlInDisplay:!0,sideMenu:{showGroups:!0},views:{fullMonth:{maximumEventsPerDayDisplay:0}},events:{onEventUpdated(l){},onSetDate(l){i(l,null,o)},onNextMonth(l){i(l,l.getMonth(),o)},onPreviousMonth(l){i(l,l.getMonth(),o)}}}),d=o.getCurrentDisplayDate().getFullYear(),n=(l,y)=>{let u=`${l}-01-01`,w=`${l}-12-31`;if(y!==null){const c=L(`${l}-${y+1}`);u=L(c.subtract(1,"month")).startOf("month").format("YYYY-MM-DD"),w=L(c.add(1,"month")).endOf("month").format("YYYY-MM-DD")}const T=o.getHolidays();o.removeHolidays(T);const Y=X(u,w),$=Y.map(c=>c.date),O=P(u,w),E=J(u,w,!1);return O.map(c=>{const{date:D,lunarDayCN:p,lunarMonCN:N}=c;let M="";const W=D.split("-"),rt=Number(W[1]),at=Number(W[2]);if(M=N+p,E.includes(D)&&(M=`<p style="color: #e60000; font-weight: bold;">${V(D).name.split(",")[1]}</p>

${M}`),$.includes(D)){const k=Y.find(ot=>ot.date===D);M=`${M}<br/>${k==null?void 0:k.name}`}return{year:l,month:rt,day:at,title:M}})},i=(l,y,u)=>{const w=u.getHolidays();u.removeHolidays(w.map(Y=>Y.title));const T=n(l.getFullYear(),y);u.addHolidays(T).refresh()},s=(S=t.value)==null?void 0:S.map(l=>{const{id:y,name:u,createTime:w,updateTime:T,expectEndTime:Y,expectStartTime:$,groupTag:O,state:E}=l,c=p=>p.slice(0,1).toUpperCase()+p.slice(1),D=p=>e.value.find(N=>N.id===p).name;return{id:y,title:u,from:$||w,to:Y||T,description:u,created:w,type:4,color:At[`state${c(E)}`],group:D(O)}});(()=>{e.value.map((y,u)=>({id:999+u,text:y.name})).forEach(y=>o.addEventType(y.id,y.text))})(),o.addEvents(s).addHolidays(n(d,null)).refresh(),document.querySelectorAll(".month-name").forEach(l=>l.remove())}),(o,d)=>(lt(),dt("div",{id:"calendar",ref_key:"calendarRef",ref:a},null,512))}}),Rt=ht(It,[["__scopeId","data-v-43294d0d"]]);export{Rt as default};
