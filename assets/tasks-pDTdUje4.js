import{b as y,g as A,k as i,e as B,r as b,l as h}from"./index-CZgyd3cA.js";const v="tasks",R="todo",E="done",L="archive",Y="taskGroups",_="YYYY-MM-DD HH:mm:ss",g="all";var S={exports:{}};(function(t,m){(function(l,n){t.exports=n()})(y,function(){return function(l,n,c){n.prototype.isBetween=function(r,d,e,s){var o=c(r),a=c(d),f=(s=s||"()")[0]==="(",u=s[1]===")";return(f?this.isAfter(o,e):!this.isBefore(o,e))&&(u?this.isBefore(a,e):!this.isAfter(a,e))||(f?this.isBefore(o,e):!this.isAfter(o,e))&&(u?this.isAfter(a,e):!this.isBefore(a,e))}}})})(S);var k=S.exports;const x=A(k),I=()=>({getItem:()=>{const n=JSON.parse(localStorage.getItem(v));return(n==null?void 0:n.length)?n:[]},setItem:n=>{localStorage.setItem(v,JSON.stringify(n))},save2Local:n=>{const c="tasks.json",r=document.createElement("a"),d=new Blob([n],{type:"application/json"});r.style.display="none",r.download=c,r.href=URL.createObjectURL(d),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}),O=I;i.extend(x);const{setItem:T,getItem:w}=O(),j=B(v,()=>{const t=b(w()),m=h(()=>e=>{var s;return e.id===g?t.value:(s=t.value)==null?void 0:s.filter(o=>o.groupTag===e.id)}),l=h(()=>e=>{var s;return(s=t.value)==null?void 0:s.filter(o=>o.id===e)[0]});return{tasks:t,tasksByGroupTag:m,tasksById:l,addTask:e=>{var s;return(s=t.value)==null||s.push(e),T(t.value),t},updateTask:e=>{var s;return t.value=(s=t.value)==null?void 0:s.map(o=>o.id===e.id?{...o,...e}:o),T(t.value),t},toTop:e=>{var s;if((s=t.value)!=null&&s.length){const o=t.value.findIndex(a=>a.id===e.id);e.isTop?(t.value=t.value.map(a=>(delete a.isTop,a)),t.value.splice(o,1),t.value.unshift(e)):(delete e.isTop,t.value[o]=e)}return T(t.value),t},searchTasks:(e,s)=>{const o="YYYY-MM-DD",{createTime:a="day"}=e,f=u=>{const p=i(u.createTime).format(o);if(a==="day")return i().isSame(p,"day");if(a==="weak")return i(p).isBetween(i(),i().subtract(7,"day"));if(a==="month")return i(p).isBetween(i(),i().subtract(30,"day"))};return s.filter(u=>f(u))}}});export{_ as D,Y as T,R as a,E as b,L as c,g as d,O as e,x as i,j as u};
